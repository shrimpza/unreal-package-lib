/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.4.1/userguide/java_library_plugin.html
 */

plugins {
    id 'java-library'
    id 'ivy-publish'
}

group = 'net.shrimpworks'
version = "1.3"

sourceCompatibility = '11'
targetCompatibility = '11'

if (System.getenv().containsKey("TRAVIS_BUILD_NUMBER")) {
    version = "${version}.${System.env.TRAVIS_BUILD_NUMBER}"
}

repositories {
    mavenCentral()
}


publishing {
    repositories {
        ivy {
            name = "ShrimpWorks"
            url = 'https://code.shrimpworks.za.net/artefacts/'
            authentication {
                basic(BasicAuthentication)
            }
            credentials(PasswordCredentials) {
                username = "${System.env.ARTEFACTS_USER}"
                password = "${System.env.ARTEFACTS_PASSWORD}"
            }
        }
    }
}

dependencies {
    testImplementation('org.junit.jupiter:junit-jupiter:5.4.2')
}

test {
    useJUnitPlatform()
}

jar {
    manifest {
        attributes(
                'Implementation-Title': project.name,
                'Implementation-Version': project.version
        )
    }
}

publishing {
    publications {
        ivy(IvyPublication) {
            from components.java
        }
    }
}
